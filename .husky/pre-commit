#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Pre-commit í›… ì‹¤í–‰ ì¤‘..."

# lint-staged ì‹¤í–‰ (ì˜¤ë¥˜ê°€ ìˆì–´ë„ ê³„ì† ì§„í–‰)
echo "ğŸ“ ì½”ë“œ í¬ë§·íŒ… ë° ë¦°íŠ¸ ê²€ì‚¬..."
if ! npx lint-staged; then
  echo "âš ï¸  lint-stagedì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì§€ë§Œ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤."
fi

# AI ë¦¬ë·° ì‹¤í–‰ (í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ)
if [ "$AI_REVIEW" = "true" ]; then
  echo "ğŸ¤– AI ë¦¬ë·°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."
  if ! node scripts/ai-review.js; then
    echo "âŒ AI ë¦¬ë·°ì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì–´ ì»¤ë°‹ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤."
    exit 1
  fi
else
  echo "â„¹ï¸  AI ë¦¬ë·°ë¥¼ ê±´ë„ˆëœë‹ˆë‹¤. (AI ë¦¬ë·°ë¥¼ ì›í•˜ë©´ AI_REVIEW=trueë¡œ ì„¤ì •í•˜ì„¸ìš”)"
fi

echo "âœ… Pre-commit í›… ì™„ë£Œ"